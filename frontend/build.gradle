plugins {
    id 'java'
    id 'com.coditory.webjar' version '1.0.3'
}

apply plugin: 'base'

node {
    version = '12.19.0'
    download = true
}

webjar {
    // Directory where npm puts the result
    distDir = "build"
    // Directory with npm results in the jar
    webjarDir = 'META-INF/resources'

    // NPM Task names
    taskNames {
        clean = "clean"
        build = "build"
        lint = "lint"
        watch = "watch"
    }
}

task bundle(type: YarnTask, dependsOn: yarn_install) {
    args = ['build']
}

task run(type: YarnTask) {
    args = ['start']
}

task appYarnBuild(type: YarnTask) {
    args = ['build']
}

assemble.dependsOn(appYarnBuild)

jar.dependsOn(bundle)
